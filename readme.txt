In order to compile this create a build subdirectory (mkdir build)
cd build
cmake ..
after that if all is OK run make, it creates an executable circular
try it

notice: faltaria sincronizar la stdout pero no tengo mas tiempo ya.
Hay mensajes de debug que filtrar.